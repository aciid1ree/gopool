# gopool — внутреняя очередь с пулами воркеров

Крошечный HTTP-сервис на Go для фоновой обработки задач: буферизированная очередь, пул воркеров, экспоненциальный бэкофф с джиттером, корректное завершение.

> TL;DR: `POST /enqueue` кладёт задачу, воркеры обрабатывают, `GET /healthz` — проверка здоровья.

## Возможности
- Буферизированная очередь (размер настраивается).
- Пул воркеров (кол-во настраивается).
- Экспоненциальный бэкофф с джиттером и `max_retries`.
- Симуляция работы 100–500 мс; ~20% ошибок (для демонстрации ретраев).
- Корректное завершение: прекращаем приём, дожидаемся текущих задач.

## Быстрый старт
```bash
# запуск
ADDR=:8080 WORKERS=4 QUEUE_SIZE=64 go run ./cmd/server

# проверка здоровья
curl -i http://localhost:8080/healthz

# отправка задания
curl -i -X POST http://localhost:8080/enqueue \
  -H "Content-Type: application/json" \
  -d '{"id":"t1","payload":"hello","max_retries":3}'
